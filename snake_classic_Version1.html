<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Nokia Snake Game (HTML/JS)</title>
  <style>
    body { background: #111; font-family: Arial, sans-serif; color: #eee; }
    #container { width: 420px; margin: 40px auto; text-align: center; }
    #gameCanvas { background: #222; display: block; margin: 0 auto; border: 2px solid #666; }
    .screen { display: none; }
    .active { display: block; }
    .title { font-size: 2em; margin: 20px 0; color: #0f0; }
    .score { font-size: 1.2em; margin: 10px 0; }
    .btn { background: #0f0; color: #111; border: none; padding: 12px 28px; font-size: 1.1em; cursor: pointer; margin: 18px 0; border-radius: 7px;}
    .btn:hover { background: #fff; color: #222; }
  </style>
</head>
<body>
  <div id="container">
    <div id="startScreen" class="screen active">
      <div class="title">NOKIA SNAKE</div>
      <div style="margin:18px 0;">Arrow keys: move<br>Eat food. Don't hit yourself or the wall.</div>
      <button class="btn" onclick="startGame()">Start Game</button>
    </div>
    <div id="gameScreen" class="screen">
      <canvas id="gameCanvas" width="400" height="400"></canvas>
      <div class="score" id="scoreDisplay"></div>
    </div>
    <div id="gameOverScreen" class="screen">
      <div class="title" style="color:#f44;">GAME OVER</div>
      <div class="score" id="finalScore"></div>
      <button class="btn" onclick="startGame()">Restart</button>
    </div>
  </div>
  <script>
    // --- Game Parameters ---
    const CELL_SIZE = 20;
    const GRID_SIZE = 20; // 20 x 20 grid
    const CANVAS_SIZE = CELL_SIZE * GRID_SIZE;
    const INITIAL_SPEED = 120; // ms
    const SPEEDUP_EVERY = 5; // points
    const SPEEDUP_AMOUNT = 8; // ms

    // --- Game State ---
    let snake, direction, nextDirection, food, score, speed, running, gameLoopId;

    // DOM Elements
    const startScreen = document.getElementById('startScreen');
    const gameScreen = document.getElementById('gameScreen');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const finalScore = document.getElementById('finalScore');
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // --- Utility ---
    function randomFood() {
      let pos;
      do {
        pos = {
          x: Math.floor(Math.random() * GRID_SIZE),
          y: Math.floor(Math.random() * GRID_SIZE)
        };
      } while (snake.some(s => s.x === pos.x && s.y === pos.y));
      return pos;
    }

    function drawCell(x, y, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x * CELL_SIZE + 1, y * CELL_SIZE + 1, CELL_SIZE - 2, CELL_SIZE - 2);
    }

    function drawGrid() {
      ctx.fillStyle = "#222";
      ctx.fillRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);
      ctx.strokeStyle = "#333";
      for (let i = 0; i <= GRID_SIZE; i++) {
        ctx.beginPath();
        ctx.moveTo(i * CELL_SIZE, 0);
        ctx.lineTo(i * CELL_SIZE, CANVAS_SIZE);
        ctx.moveTo(0, i * CELL_SIZE);
        ctx.lineTo(CANVAS_SIZE, i * CELL_SIZE);
        ctx.stroke();
      }
    }

    // --- Game Logic ---
    function startGame() {
      showScreen(gameScreen);
      snake = [
        {x: 10, y: 10},
        {x: 9, y: 10},
        {x: 8, y: 10}
      ];
      direction = {x: 1, y: 0};
      nextDirection = {x: 1, y: 0};
      score = 0;
      speed = INITIAL_SPEED;
      food = randomFood();
      running = true;
      scoreDisplay.textContent = "Score: 0";
      clearInterval(gameLoopId);
      gameLoopId = setInterval(gameLoop, speed);
    }

    function gameLoop() {
      // Handle direction change
      direction = nextDirection;

      // Calculate new head
      const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };

      // Check wall collision
      if (head.x < 0 || head.x >= GRID_SIZE || head.y < 0 || head.y >= GRID_SIZE) {
        return gameOver();
      }

      // Check self collision
      if (snake.some(s => s.x === head.x && s.y === head.y)) {
        return gameOver();
      }

      // Move snake
      snake.unshift(head);

      // Check food
      if (head.x === food.x && head.y === food.y) {
        score++;
        scoreDisplay.textContent = "Score: " + score;
        if (score % SPEEDUP_EVERY === 0 && speed > 40) {
          speed -= SPEEDUP_AMOUNT;
          clearInterval(gameLoopId);
          gameLoopId = setInterval(gameLoop, speed);
        }
        food = randomFood();
      } else {
        snake.pop();
      }

      // Draw everything
      drawGrid();
      // Draw food
      drawCell(food.x, food.y, "#f44");
      // Draw snake
      snake.forEach((s, idx) => {
        drawCell(s.x, s.y, idx === 0 ? "#0f0" : "#1c1");
      });
    }

    function gameOver() {
      running = false;
      clearInterval(gameLoopId);
      finalScore.textContent = "Score: " + score;
      showScreen(gameOverScreen);
    }

    // --- Keyboard Controls ---
    document.addEventListener('keydown', function(e) {
      if (!running) return;
      if (e.key === "ArrowUp" && direction.y !== 1) {
        nextDirection = {x: 0, y: -1};
      } else if (e.key === "ArrowDown" && direction.y !== -1) {
        nextDirection = {x: 0, y: 1};
      } else if (e.key === "ArrowLeft" && direction.x !== 1) {
        nextDirection = {x: -1, y: 0};
      } else if (e.key === "ArrowRight" && direction.x !== -1) {
        nextDirection = {x: 1, y: 0};
      }
    });

    // --- Screen Management ---
    function showScreen(screen) {
      [startScreen, gameScreen, gameOverScreen].forEach(s => s.classList.remove('active'));
      screen.classList.add('active');
    }
  </script>
</body>
</html>